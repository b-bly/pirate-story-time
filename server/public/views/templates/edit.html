<div ng-include="'views/partials/nav.html'"></div>

<h1 class="lead">Browse cards</h1>
<div flex>
  <md-content class="md-padding" layout="row" layout-wrap>
    <!-- <div flex> -->
    <!-- style="height: 200px; max-width: 200px" -->

    <md-card ng-repeat="card in vm.cards.list" md-theme="{{ showDarkTheme ? 'dark-blue' : 'default' }}" md-theme-watch>

      <!-- non edit mode  -->
      <div ng-show="!editCard">
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Type: {{ card.type }}</span>
            <span class="md-subhead">Description: {{card.description }}</span>
            
              <span>Save to pirateverse? <span ng-if="card.savetopirateverse">Of course, matey!</span>
              <p ng-if="!card.savetopirateverse">Good heavens, no!</p></span>
      
          </md-card-title-text>
          <md-card-title-media>
            <!-- <div class="md-media-md card-media"></div> -->
            <img ng-src="{{card.url}}" style="height: 200px; max-width: 200px">
          </md-card-title-media>
          <md-card-title-media>

          </md-card-title-media>
        </md-card-title>
        <md-card-actions layout="row" layout-align="end center">
          <md-button ng-click="editCard = !editCard; vm.selectedCard = card;"><i aria-label="edit" class="material-icons" style="font-size:24px;">mode edit</i></md-button>
          <md-button class="md-warn" ng-click="vm.deleteCard(card._id)"><i aria-label="delete" class="material-icons" style="font-size:24px;">delete</i></md-button>
        </md-card-actions>
      </div>

      <!-- edit mode  -->
      <div ng-show="editCard">

        <form>
          <md-card-title>
            <md-card-title-text>
              <label for="type">Type: </label>

              <!-- to do: https://stackoverflow.com/questions/17815036/setting-default-value-in-select-drop-down-using-angularjs -->
              <select ng-model="vm.type" ng-options="x for x in vm.types"><option selected="selected">{{card.type}}</option>
                  </select>


              <label for="description">Description:</label>
              <textarea ng-value="card.description" type="text" ng-model="vm.description" rows="4" cols="60"></textarea>
              <md-checkbox ng-value="card.savetopirateverse" ng-model="vm.saveToPirateverse" aria-label="Save to Pirateverse?"  ng-init="card.savetopirateverse">
                Save to pirateverse? {{card.savetopirateverse}}
              </md-checkbox>
            </md-card-title-text>
          </md-card-title>


          <md-card-title>
            <div>
              <label for="url">Image URL:</label>
              <input ng-value="card.url" type="url" ng-model="vm.url" />
            </div>
          </md-card-title>
          <div>

            <md-button ng-click="vm.updateACard(card._id); editListing = !editListing"><i aria-label="submit" class="material-icons" style="font-size:24px;">done</i></md-button>
            <md-button ng-click="editCard = !editCard"><i aria-label="cancel" class="material-icons" style="font-size:24px;">undo</i></md-button>
          </div>
        </form>

      </div>
    </md-card>



    <!-- <div layout layout-padding layout-align="center end" style="height:200px">
      <md-checkbox ng-model="showDarkTheme">Use 'Dark' Themed Cards</md-checkbox>
    </div> -->

    <!-- </div> -->
  </md-content>
</div>