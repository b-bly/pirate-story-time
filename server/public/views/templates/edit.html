<div ng-include="'views/partials/nav.html'"></div>

<!-- search, my library, pirateverse, settings -->




<!-- CARDS not edit mode -->

<div layout="column" class="md-inline-form">

  <md-content md-theme="docs-dark" layout-padding layout="row" layout-wrap>
    <div flex="30" layout-align="start center">
      <h2 class="lead">Browse cards</h2>
    </div>
    <div flex layout-align="center center">
      <md-input-container layout-align="center center">
        <label></label>
        <input ng-model="vm.searchText" placeholder="search">
      </md-input-container>
      <md-button ng-href="#/add" class="md-icon-button" aria-label="Menu">
        <md-icon class="md-48">add</md-icon>
      </md-button>
      <md-button ng-href="#/settings" class="md-icon-button" aria-label="Menu">
        <md-icon class="md-48">settings</md-icon>
      </md-button>
    </div>
  </md-content>
</div>

<md-content id="myCards">
  <section layout="row" layout-align="center center" layout-wrap>
    <md-button ng-click="vm.cardService.getUsersCards()" md-no-ink class="md-primary">My cards</md-button>
    <md-button ng-click="vm.cardService.getCards()" md-no-ink class="md-primary">Pirateverse</md-button>
  </section>
</md-content>


<div flex>
  <md-content class="md-padding" layout="row" layout-wrap>
    <!-- <div flex> -->
    <!-- style="height: 200px; max-width: 200px" -->

    <md-card ng-repeat="card in vm.cards.list | filter:vm.searchText" md-theme="{{ showDarkTheme ? 'dark-blue' : 'default' }}"
      md-theme-watch>

      <!-- non edit mode  -->
      <div ng-show="!editCard">
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">Type: {{ card.type }}</span>
            <span class="md-subhead">Description: {{card.description }}</span>

            <span>Save to pirateverse? <span ng-if="card.savetopirateverse">Of course, matey!</span>
            <p ng-if="!card.savetopirateverse">Good heavens, no!</p>
            </span>

          </md-card-title-text>
          <md-card-title-media>
            <!-- <div class="md-media-md card-media"></div> -->
            <img ng-src="{{card.url}}" style="height: 200px; max-width: 200px">
          </md-card-title-media>
          <md-card-title-media>

          </md-card-title-media>
        </md-card-title>
        <md-card-actions layout="row" layout-align="end center">
          <md-button ng-click="editCard = !editCard; vm.selectedCard = card;"><i aria-label="edit" class="material-icons" style="font-size:24px;">mode edit</i></md-button>
          <md-button class="md-warn" ng-click="vm.deleteCard(card._id)"><i aria-label="delete" class="material-icons" style="font-size:24px;">delete</i></md-button>
        </md-card-actions>
      </div>

      <!-- *** EDIT mode  *** -->
      <div ng-show="editCard">

        <form>
          <md-card-title>
            <md-card-title-text>
              <label for="type">Type: </label>

              <!-- to do: https://stackoverflow.com/questions/17815036/setting-default-value-in-select-drop-down-using-angularjs -->
              <select ng-selected="card.type" ng-model="card.type" ng-options="x for x in vm.types">
                <option selected>{{card.type}}</option>
                <option value="card.type" selected="selected">{{card.type}}</option>
                  </select>
              <!-- tried ng-selected and ng-value and value and selected -->

              <label for="description">Description:</label>
              <textarea ng-value="card.description" type="text" ng-model="card.description" rows="4" cols="60"></textarea>
              <md-checkbox ng-model="card.savetopirateverse" aria-label="Save to Pirateverse?">
                Save to pirateverse? {{card.savetopirateverse}}
              </md-checkbox>
              <!-- Works with input type=checkbox and ng-checked="{{card.savetopirateverse}} === true" -->
            </md-card-title-text>
          </md-card-title>


          <md-card-title>
            <div>
              <label for="url">Image URL:</label>
              <input ng-value="card.url" type="url" ng-model="card.url" />
            </div>
          </md-card-title>
          <div>

            <md-button ng-click="vm.updateACard(card); editListing = !editListing"><i aria-label="submit" class="material-icons" style="font-size:24px;">done</i></md-button>
            <md-button ng-click="editCard = !editCard"><i aria-label="cancel" class="material-icons" style="font-size:24px;">undo</i></md-button>
          </div>
        </form>

      </div>
    </md-card>



    <!-- <div layout layout-padding layout-align="center end" style="height:200px">
      <md-checkbox ng-model="showDarkTheme">Use 'Dark' Themed Cards</md-checkbox>
    </div> -->

    <!-- </div> -->
  </md-content>
</div>